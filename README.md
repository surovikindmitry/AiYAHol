# YaGptHoliday Telegram Bot

Телеграм-бот, который ежедневно публикует информацию о праздниках и знаменательных датах в канал, используя YandexGPT.

## Описание проекта

Бот автоматически запрашивает информацию о текущих праздниках и знаменательных датах с помощью YandexGPT и публикует ее в указанный Telegram-канал. Запрос выполняется ежедневно по расписанию (по умолчанию в 10:00 по московскому времени).

## Особенности

- Автоматическая публикация информации о праздниках в Telegram-канале
- Использование YandexGPT (модель yandexgpt) для получения актуальной информации о праздниках
- Автоматическое форматирование текста с выделением названий праздников жирным шрифтом
- Настраиваемое расписание публикаций
- Возможность ручной публикации с помощью команды `/post_now`
- Простой веб-интерфейс для мониторинга статуса бота

## Технологии

- Python 3.11+
- aiogram 3 (асинхронный Telegram Bot API фреймворк)
- APScheduler (планировщик задач)
- Flask (веб-интерфейс)
- YandexGPT API для генерации текста

## Установка и настройка

1. Клонировать репозиторий:
```bash
git clone https://github.com/surovikindmitry/AiYAHol.git
cd AiYAHol
```

2. Установить зависимости:
```bash
pip install -r requirements.txt
```

3. Создать файл `.env` на основе примера `env.example` и заполнить необходимые переменные окружения:
```bash
cp .env.example .env
```

4. Отредактировать файл `.env` и заполнить следующие переменные:
   - `BOT_TOKEN` - токен бота, полученный от BotFather
   - `CHANNEL_ID` - ID канала, в который будут публиковаться сообщения
   - `YANDEX_API_KEY` - API ключ Yandex Cloud
   - `YANDEX_FOLDER_ID` - ID папки в Yandex Cloud

## Запуск бота

```bash
python main.py
```

## Команды бота

- `/start` - начать работу с ботом
- `/help` - получить справку о командах
- `/post_now` - немедленно опубликовать информацию о праздниках в канал

## Настройка расписания

По умолчанию бот публикует информацию ежедневно в 10:00 по московскому времени. Вы можете изменить это расписание, отредактировав следующие переменные в файле `.env`:

- `TIMEZONE` - часовой пояс (по умолчанию `Europe/Moscow`)
- `SCHEDULED_HOUR` - час публикации (0-23)
- `SCHEDULED_MINUTE` - минута публикации (0-59)

## Настройка YandexGPT

### Модель YandexGPT

По умолчанию бот использует модель `yandexgpt`. Вы можете изменить модель, отредактировав переменную `GPT_MODEL` в файле `.env`. Доступные варианты:
- `yandexgpt` - основная модель YandexGPT 
- `yandexgpt-lite` - облегченная версия модели

### Запрос к YandexGPT

Вы можете изменить запрос к YandexGPT, отредактировав переменную `HOLIDAY_PROMPT` в файле `.env`. Обратите внимание, что текущая дата будет автоматически добавлена к запросу. По умолчанию используется запрос:

```
Определи, какой сегодня праздник или знаменательный день. Используй российский государственный календарь, народный календарь, православный календарь, международный календарь. Выдай список праздников и событий, каждое с новой строки, используя тире в начале строки. Названия праздников указывай максимально точно. Ответ должен быть кратким и лаконичным.
```

Фактический запрос к API будет выглядеть так:
```
Сегодня 09.04.2025. Определи, какой сегодня праздник или знаменательный день. Используй российский государственный календарь...
```

После получения ответа от YandexGPT, бот автоматически форматирует текст, выделяя названия праздников жирным шрифтом для лучшей читаемости в Telegram-канале.

## Лицензия

MIT
